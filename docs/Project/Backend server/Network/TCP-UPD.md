# **TCP/UPD**

## **区别**
- **TCP**:
    - TCP面向连接，通过三次握手建立连接，四次挥手断开连接；  面试的重点
    - TCP是可靠的通信方式，通过超时重传、数据校验等方式来确保数据无差错，不丢失，不重复，并且按序到达；
    - TCP把数据当成字节流，当网络出现波动时，连接可能出现响应延迟的问题；
    - TCP只支持点对点通信；
    - TCP报文的首部较大，为20字节；
    - TCP是全双工的可靠信道
- **UDP**:
    - UDP是无连接的，即发送数据之前不需要建立连接，这种方式为UDP带来了高效的传输效率，但也导致无法确保数据的发送成功；
    - UDP以最大的速率进行传输，但不保证可靠交付，会出现丢失、重复等等问题；
    - UDP没有拥塞控制，当网络出现拥塞时，发送方不会降低发送速率；
    - UDP支持一对一，一对多，多对一和多对多的通信；
    - UDP报文的首部比较小，只有8字节；
    - UDP是不可靠信道
      
## **TCP保证自身可靠的方式**
- 数据分片：在发送端对用户数据进行分片，在接收端进行重组，由TCP确定分片的大小并控制分片和重组；
- 到达确认：接收端接收到分片数据时，根据分片的序号向对端回复一个确认包；
- 超时重发：发送方在发送分片后开始计时，若超时却没有收到对端的确认包，将会重发分片；
- 滑动窗口：TCP 中采用滑动窗口来进行传输控制，发送方可以通过滑动窗口的大小来确定应该发送多少字节的数据。当滑动窗口为 0 时，发送方不会再发送数据；
- 失序处理：TCP的接收端会把接收到的数据重新排序；
- 重复处理：如果传输的分片出现重复，TCP的接收端会丢弃重复的数据；
- 数据校验：TCP通过数据的检验和来判断数据在传输过程中是否正确。

## **UDP不可靠的原因**
- 没有上述TCP的机制，如果校验和出错，UDP会将该报文丢弃

## **使用场景**
- TCP 使用场景
    - TCP实现了数据传输过程中的各种控制，适合对可靠性有要求的场景。
- UDP 使用场景
    - 可以容忍数据丢失的场景：
    - 视频、音频等多媒体通信（即时通信）；
    - 广播信息

## **UDP能实现可靠传输吗？**
- 这是个伪命题，如果用UDP实现可靠传输，那么，应用程序必须实现重传和排序等功能，非常麻烦，还不如直接用TCP

